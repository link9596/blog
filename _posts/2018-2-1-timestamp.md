---
layout: post
title: 捕捉响应头里的时间戳
---

Javascript获取当前时间戳有三种方法，有两种可以精确到毫秒，另外一种可以精确到秒，具体如下

```javascript
var timestamp = Date.parse(new Date());
//精确到秒
//输出为1517457493000
```

```javascript
var timestamp = (new Date()).valueOf();
//精确到毫秒
//输出为1517457493101
```

```javascript
var timestamp = new Date().getTime();
//精确到毫秒
//输出为1517457493101
```

#### 嘘，都别忘了，单单这样获取的时间戳可不是网络上的时间戳！

什么意思呢？就举个栗子~这里先定义一个“标准时间”

> 当标准时间为
> 2018-02-01 00:00:00
> 此时的时间戳为：1517414400000

分别运行上方三个函数，并输出，得到的三个结果都是`1517414400000`，嗯，没错这与标准时间相同，**可是**，此时用户修改了时间，返回的结果就不是以上的“标准时间”了

也就是说，这种方法获取的是用户那儿的时间戳，当用户修改时间后，输出的结果也跟随着跑掉了，如果你想做一个计时器，用户只需轻松去设置里修改一下时间，就能修改显示效果。

## #怎么避免

这个简单，只需要获取网络上的时间戳就行了。

![期待无比的眼神.png](http://lkopp.ml/usrimg/2017-12-24-1.png)

可到哪里获取网络时间戳捏？又需要找一个api吗？

完全不用，浏览器向服务器发起请求的时候，有一个响应头，里面就藏着我们想要的东西嘿嘿:sunglasses: